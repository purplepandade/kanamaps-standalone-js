document.addEventListener("DOMContentLoaded",e=>{if(!document.querySelector("#map"))return;(e=>{var a,n,t,o="The Google Maps JavaScript API",r="google",l="importLibrary",s="__ib__",i=document,c=window,d=(c=c[r]||(c[r]={})).maps||(c.maps={}),p=new Set,m=new URLSearchParams,g=()=>a||(a=new Promise(async(l,c)=>{for(t in await (n=i.createElement("script")),m.set("libraries",[...p]+""),e)m.set(t.replace(/[A-Z]/g,e=>"_"+e[0].toLowerCase()),e[t]);m.set("callback",r+".maps."+s),n.src=`https://maps.${r}apis.com/maps/api/js?`+m,d[s]=l,n.onerror=()=>a=c(Error(o+" could not load.")),n.nonce=i.querySelector("script[nonce]")?.nonce||"",i.head.append(n)}));d[l]?console.warn(o+" only loads once. Ignoring:",e):d[l]=(e,...a)=>p.add(e)&&g().then(()=>d[l](e,...a))})({key:"AIzaSyBb0ALD0brE5h8b3RXpzPs3kMjjzoxsQUQ"});let a=[],n,t=[];async function o(){let{Map:e}=await google.maps.importLibrary("maps");n=new e(document.querySelector(".map_map-holder"),{center:{lat:-34.397,lng:150.644},zoom:8});document.querySelector('[c-el="all-apothecaries-list"]').querySelectorAll('[c-el="apothecary"]').forEach(e=>{let n=JSON.parse(e.getAttribute("data-apothecary"));n.clickNode=e,a.push(n)});let o=new google.maps.LatLngBounds;function r(e,a){t.forEach(e=>{e.close()}),n.panTo(e.getPosition()),a.open({anchor:e,map:n})}a.forEach((e,a)=>{let l={};l.lat=e._vendor.location.latitude,l.lng=e._vendor.location.longitude,l.latlng=new google.maps.LatLng(l.lat,l.lng),l.htmlNode=e.clickNode;var s=new google.maps.Marker({position:l.latlng});let i=`<div style="text-align:center;"><b>${e._vendor.name}: </b>
                <br>
                <b>${e._vendor.strasse_und_nummer}</b>
                <br>
                <b>${e._vendor.PLZ} ${e._vendor.Stadt}</b>

                <br>
                <a href="${e._vendor.live_url}">Zur Website</a>
            </div>`,c=new google.maps.InfoWindow({content:i});t.push(c),s.addListener("click",()=>{r(s,c)}),l.htmlNode.addEventListener("click",()=>{r(s,c)}),o.extend(l.latlng),s.setMap(n)}),n.fitBounds(o)}function r(){window.KannaMaps?(console.log("window.KannaMaps exists:",window.KannaMaps),o()):(console.log("window.KannaMaps does not exist yet. Retrying in 1000ms..."),setTimeout(r,1e3))}r()});
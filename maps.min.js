document.addEventListener("DOMContentLoaded",e=>{if(!document.querySelector("#map"))return;(e=>{var t,a,n,r="The Google Maps JavaScript API",l="google",o="importLibrary",s="__ib__",i=document,p=window,c=(p=p[l]||(p[l]={})).maps||(p.maps={}),d=new Set,y=new URLSearchParams,m=()=>t||(t=new Promise(async(o,p)=>{for(n in await (a=i.createElement("script")),y.set("libraries",[...d]+""),e)y.set(n.replace(/[A-Z]/g,e=>"_"+e[0].toLowerCase()),e[n]);y.set("callback",l+".maps."+s),a.src=`https://maps.${l}apis.com/maps/api/js?`+y,c[s]=o,a.onerror=()=>t=p(Error(r+" could not load.")),a.nonce=i.querySelector("script[nonce]")?.nonce||"",i.head.append(a)}));c[o]?console.warn(r+" only loads once. Ignoring:",e):c[o]=(e,...t)=>d.add(e)&&m().then(()=>c[o](e,...t))})({key:"AIzaSyBb0ALD0brE5h8b3RXpzPs3kMjjzoxsQUQ"});let t=[],a,n=[],r=[{stylers:[{hue:"#baf4c4"},{saturation:10}]},{featureType:"water",stylers:[{color:"#effefd"}]},{featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"road",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]}];async function l(){let{Map:e}=await google.maps.importLibrary("maps");a=new e(document.querySelector(".map_map-holder"),{center:{lat:-34.397,lng:150.644},zoom:8,styles:r});document.querySelector('[c-el="all-apothecaries-list"]').querySelectorAll('[c-el="apothecary"]').forEach(e=>{let a=JSON.parse(e.getAttribute("data-apothecary"));a.clickNode=e,t.push(a)});let l=new google.maps.LatLngBounds;function o(e,t){n.forEach(e=>{e.close()}),a.panTo(e.getPosition()),t.open({anchor:e,map:a})}t.forEach((e,t)=>{let r={};r.lat=e._vendor.location.latitude,r.lng=e._vendor.location.longitude,r.latlng=new google.maps.LatLng(r.lat,r.lng),r.htmlNode=e.clickNode;var s=new google.maps.Marker({position:r.latlng});let i=`<div style="text-align:center;"><b>${e._vendor.name}: </b>
                <br>
                <b>${e._vendor.strasse_und_nummer}</b>
                <br>
                <b>${e._vendor.PLZ} ${e._vendor.Stadt}</b>

                <br>
                <a href="${e._vendor.live_url}">Zur Website</a>
            </div>`,p=new google.maps.InfoWindow({content:i});n.push(p),s.addListener("click",()=>{o(s,p)}),r.htmlNode.addEventListener("click",()=>{o(s,p)}),l.extend(r.latlng),s.setMap(a)}),a.fitBounds(l)}function o(){window.KannaMaps?(console.log("window.KannaMaps exists:",window.KannaMaps),l()):(console.log("window.KannaMaps does not exist yet. Retrying in 1000ms..."),setTimeout(o,1e3))}o()});